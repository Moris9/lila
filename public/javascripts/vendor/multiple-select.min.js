!function(){"use strict";function t(){const t=window.getComputedStyle(this).display;return!!t&&"none"!=t}$.fn.multipleSelectHover=function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)};class e{constructor(t,e){var s;const i=this,l=t.attr("name")||e.name||"";this.options=e,this.$el=t.hide(),this.$label=this.$el.closest("label")||this.$el.attr("id")&&$(`label[for="${null===(s=this.$el.attr("id"))||void 0===s?void 0:s.replace(/:/g,"\\:")}"]`),this.$parent=$(`<div class="ms-parent ${t.attr("class")||""}" title="${t.attr("title")}"/>`),this.$choice=$(['<button type="button" class="ms-choice">',`<span class="placeholder">${this.options.placeholder}</span>`,"<div></div>","</button>"].join("")),this.$drop=$(`<div class="ms-drop ${this.options.position}" style="width: ${this.options.dropWidth}"></div>`),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",this.options.width||this.$el.css("width")||this.$el.outerWidth()+20),this.selectAllName=`data-name="selectAll${l}"`,this.selectGroupName=`data-name="selectGroup${l}"`,this.selectItemName=`data-name="selectItem${l}"`,this.options.keepOpen||$(document).on("click",(function(e){$(e.target)[0]!==i.$choice[0]&&$(e.target).parents(".ms-choice")[0]!==i.$choice[0]&&($(e.target)[0]===i.$drop[0]||$(e.target).parents(".ms-drop")[0]!==i.$drop[0]&&e.target!==t[0])&&i.options.isOpen&&i.close()}))}init(){var t,e;const s=this,i=$("<ul></ul>");this.$drop.html(""),this.options.filter&&this.$drop.append(['<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"].join("")),this.options.selectAll&&!this.options.single&&i.append(['<li class="ms-select-all">',"<label>",`<input type="checkbox" ${this.selectAllName} /> `,(null===(t=this.options.selectAllDelimiter)||void 0===t?void 0:t[0])||"",this.options.selectAllText,(null===(e=this.options.selectAllDelimiter)||void 0===e?void 0:e[1])||"","</label>","</li>"].join("")),$.each(this.$el.children(),(function(t,e){i.append(s.optionToHtml(t,e))})),i.append(`<li class="ms-no-results">${this.options.noMatchesFound}</li>`),this.$drop.append(i),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open()}optionToHtml(t,e,s,i){var l,o,n,c,h,p;const a=this,r=$(e),d=r.attr("class")||"",u=`title="${r.attr("title")}"`,f=this.options.multiple?"multiple":"",m=this.options.single?"radio":"checkbox";let g;if(r.is("option")){const t=r.val(),e=(null===(o=(l=a.options).textTemplate)||void 0===o?void 0:o.call(l,r))||"",h=r.prop("selected"),p=null===(c=(n=this.options).styler)||void 0===c?void 0:c.call(n,t),v=p?`style="${p}"`:"";g=i||r.prop("disabled");return $([`<li class="${f} ${d}" ${u} ${v}>`,`<label class="${g?"disabled":""}">`,`<input type="${m}" value="${t}" ${this.selectItemName} ${h?"checked":""} ${g?"disabled":""} ${s?`data-group="${s}"`:""}>`,e,"</label>","</li>"].join(""))}if(r.is("optgroup")){const e=null===(p=(h=a.options).labelTemplate)||void 0===p?void 0:p.call(h,r),i=$("<div/>");return s="group_"+t,g=r.prop("disabled"),i.append(['<li class="group">',`<label class="optgroup ${g?"disabled":""}" data-group="${s}">`,this.options.hideOptgroupCheckboxes||this.options.single?"":`<input type="checkbox" ${this.selectGroupName} ${g?"disabled":""}>`,e,"</label>","</li>"].join("")),$.each(r.children(),(function(t,e){i.append(a.optionToHtml(t,e,s,g))})),i.html()}}events(){const e=this,s=function(t){t.preventDefault(),e[e.options.isOpen?"close":"open"]()};this.$label&&this.$label.off("click").on("click",(function(t){"label"===t.target.nodeName.toLowerCase()&&t.target===this&&(s(t),e.options.filter&&e.options.isOpen||e.focus(),t.stopPropagation())})),this.$choice.off("click").on("click",s).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$choice.parent().off("mouseover").off("mouseout").multipleSelectHover(e.open.bind(e),e.close.bind(e)),this.$parent.off("keydown").on("keydown",(function(t){var s;if(27===t.which)e.close(),null===(s=e.$choice[0])||void 0===s||s.focus()})),this.$searchInput.off("keydown").on("keydown",(function(t){9===t.keyCode&&t.shiftKey&&e.close()})).off("keyup").on("keyup",(function(t){var s;if(e.options.filterAcceptOnEnter&&(13===t.which||32==t.which)&&e.$searchInput.val())return null===(s=e.$selectAll[0])||void 0===s||s.click(),e.close(),void e.focus();e.filter()})),this.$selectAll.off("click").on("click",(function(){var s,i;const l=$(this).prop("checked"),o=e.$selectItems.filter(t);o.length===e.$selectItems.length?e[l?"checkAll":"uncheckAll"]():(e.$selectGroups.prop("checked",l),o.prop("checked",l),null===(i=(s=e.options)[l?"onCheckAll":"onUncheckAll"])||void 0===i||i.call(s),e.update())})),this.$selectGroups.off("click").on("click",(function(){var s,i;const l=$(this).parent().attr("data-group"),o=e.$selectItems.filter(t).filter(`[data-group="${l}"]`),n=o.length!==o.filter(":checked").length;o.prop("checked",n),e.updateSelectAll(),e.update(),null===(i=(s=e.options).onOptgroupClick)||void 0===i||i.call(s,{label:$(this).parent().text(),checked:n,children:o.get(),instance:e})})),this.$selectItems.off("click").on("click",(function(){var t,s;if(e.updateSelectAll(),e.update(),e.updateOptGroupSelect(),null===(s=(t=e.options).onClick)||void 0===s||s.call(t,{label:$(this).parent().text(),value:$(this).val(),checked:$(this).prop("checked"),instance:e}),e.options.single&&e.options.isOpen&&!e.options.keepOpen&&e.close(),e.options.single){const t=$(this).val();e.$selectItems.filter((function(){return $(this).val()!==t})).each((function(){$(this).prop("checked",!1)})),e.update()}}))}open(){var t,e,s;this.$choice.hasClass("disabled")||(this.options.isOpen=!0,this.$choice.find("div").addClass("open"),this.$drop.show(),this.$selectAll.parent().show(),this.$noResults.hide(),this.$el.children().length||(this.$selectAll.parent().hide(),this.$noResults.show()),this.options.filter&&(null===(t=this.$searchInput.val("")[0])||void 0===t||t.focus(),this.filter()),null===(s=(e=this.options).onOpen)||void 0===s||s.call(e))}close(){var t,e;this.options.isOpen=!1,this.$choice.find("div").removeClass("open"),this.$drop.hide(),null===(e=(t=this.options).onClose)||void 0===e||e.call(t)}animateMethod(t){return{show:{fade:"fadeIn",slide:"slideDown"},hide:{fade:"fadeOut",slide:"slideUp"}}[t][this.options.animate]||t}update(t){const e=this.options.displayValues?this.getSelects():this.getSelects("text"),s=this.$choice.find("span"),i=e.length;0===i?s.addClass("placeholder").html(this.options.placeholder):this.options.allSelected&&i===this.$selectItems.length+this.$disableItems.length?s.removeClass("placeholder").html(this.options.allSelected):this.options.ellipsis&&i>this.options.minimumCountSelected?s.removeClass("placeholder").text(e.slice(0,this.options.minimumCountSelected).join(this.options.delimiter)+"..."):this.options.countSelected&&i>this.options.minimumCountSelected?s.removeClass("placeholder").html(this.options.countSelected.replace("#",e.length+"").replace("%",this.$selectItems.length+this.$disableItems.length+"")):s.removeClass("placeholder").text(e.join(this.options.delimiter)),this.options.addTitle&&s.prop("title",this.getSelects("text")),this.$el.val(this.getSelects()).trigger("change"),this.$drop.find("li").removeClass("selected"),this.$drop.find(`input[${this.selectItemName}]:checked`).each((function(){$(this).parents("li").first().addClass("selected")})),t||this.$el.trigger("change")}updateSelectAll(e){var s,i;let l=this.$selectItems;e||(l=l.filter(t)),this.$selectAll.prop("checked",l.length&&l.length===l.filter(":checked").length),!e&&this.$selectAll.prop("checked")&&(null===(i=(s=this.options).onCheckAll)||void 0===i||i.call(s))}updateOptGroupSelect(){const e=this.$selectItems.filter(t);$.each(this.$selectGroups,(function(t,s){const i=$(s).parent().attr("data-group"),l=e.filter(`[data-group="${i}"]`);$(s).prop("checked",l.length&&l.length===l.filter(":checked").length)}))}getSelects(t){const e=this,s=[];let i=[];return this.$drop.find(`input[${this.selectItemName}]:checked`).each((function(){i.push($(this).parents("li").first().text()),s.push($(this).val())})),"text"===t&&this.$selectGroups.length&&(i=[],this.$selectGroups.each((function(){const t=[],s=$(this).parent().text().trim(),l=$(this).parent().data("group"),o=e.$drop.find(`[${e.selectItemName}][data-group="${l}"]`),n=o.filter(":checked");if(n.length){if(t.push("["),t.push(s),o.length>n.length){const e=[];n.each((function(){e.push($(this).parent().text())})),t.push(": "+e.join(", "))}t.push("]"),i.push(t.join(""))}}))),"text"===t?i:s}setSelects(t){const e=this;this.$selectItems.prop("checked",!1),$.each(t,(function(t,s){e.$selectItems.filter(`[value="${s}"]`).prop("checked",!0)})),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length),$.each(e.$selectGroups,(function(t,s){const i=$(s).parent().attr("data-group"),l=e.$selectItems.filter(`[data-group="${i}"]`);$(s).prop("checked",l.length&&l.length===l.filter(":checked").length)})),this.update()}enable(){this.$choice.removeClass("disabled")}disable(){this.$choice.addClass("disabled")}checkAll(){var t,e;this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),null===(e=(t=this.options).onCheckAll)||void 0===e||e.call(t)}uncheckAll(){var t,e;this.$selectItems.prop("checked",!1),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),null===(e=(t=this.options).onUncheckAll)||void 0===e||e.call(t)}focus(){var t,e,s;null===(t=this.$choice[0])||void 0===t||t.focus(),null===(s=(e=this.options).onFocus)||void 0===s||s.call(e)}blur(){var t,e;this.$choice.trigger("blur"),null===(e=(t=this.options).onBlur)||void 0===e||e.call(t)}refresh(){this.init()}filter(){var e,s;const i=this,l=this.$searchInput.val().trim().toLowerCase();0===l.length?(this.$selectAll.parent().show(),this.$selectItems.parent().show(),this.$disableItems.parent().show(),this.$selectGroups.parent().show(),this.$noResults.hide()):(this.$selectItems.each((function(){const t=$(this).parent();t[t.text().toLowerCase().indexOf(l)<0?"hide":"show"]()})),this.$disableItems.parent().hide(),this.$selectGroups.each((function(){const e=$(this).parent(),s=e.attr("data-group");e[i.$selectItems.filter(t).filter(`[data-group="${s}"]`).length?"show":"hide"]()})),this.$selectItems.parent().filter(t).length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll(),null===(s=(e=this.options).onFilter)||void 0===s||s.call(e,l)}}$.fn.multipleSelect=function(){const t=arguments[0],s=arguments;let i;return this.each((function(){let l=this.multipleSelect;const o=$(this),n=Object.assign(Object.assign({},$.fn.multipleSelectDefaults),"object"==typeof t?t:{});l||(l=new e(o,n),this.multipleSelect=l),"string"==typeof t?i=l[t](s[1]):(l.init(),"string"==typeof s[1]&&(i=l[s[1]].apply(l,[].slice.call(s,2))))})),void 0!==i?i:this},$.fn.multipleSelectDefaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllDelimiter:["[","]"],minimumCountSelected:3,ellipsis:!1,multiple:!1,multipleWidth:80,single:!1,filter:!1,width:void 0,dropWidth:void 0,maxHeight:250,position:"bottom",keepOpen:!1,animate:"none",displayValues:!1,delimiter:", ",addTitle:!1,filterAcceptOnEnter:!1,hideOptgroupCheckboxes:!1,selectAllText:"Select all",allSelected:"All selected",countSelected:"# of % selected",noMatchesFound:"No matches found",styler:function(){return null},textTemplate:function(t){return t.text()},labelTemplate:function(t){return t.attr("label")},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onFilter:function(){return!1}}}();
