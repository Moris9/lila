package lila.study

object PgnFixtures:

  val pgn  = """
  { Root comment }
1. e4! $16 $40 $32 (1. d4?? d5 $146 { d5 is a good move }) (1. c4) (1. f4) 1... e6?! { e6 is a naughty move } *
  """
  val pgn2 = """
[Event "nt9's Study: Chapter 2"]
[Site "https://lichess.org/study/Q41XcI0B/2LjSXwxW"]
[Result "*"]
[UTCDate "2023.04.22"]
[UTCTime "20:41:25"]
[Variant "Standard"]
[ECO "?"]
[Opening "?"]
[Annotator "https://lichess.org/@/nt9"]

{ this is a study without moves }
*
  """

  val wcc2023Game7 = """

[Event "World Chess Championship: Game 7: Nepomniachtchi,I - Ding,Liren"]
[Site "https://lichess.org/study/QQO3VI7X/BVXdcDe4"]
[Date "2023.04.16"]
[White "Nepomniachtchi, Ian"]
[Black "Ding, Liren"]
[Result "1-0"]
[Annotator "https://lichess.org/@/Harikrishnapentala"]
[UTCDate "2023.04.19"]
[UTCTime "09:23:33"]
[Variant "Standard"]
[ECO "C07"]
[Opening "French Defense: Tarrasch Variation, Open System, Euwe-Keres Line"]

{ The score before Game 7 is tied at 3-3 with as many as four decisive games.

Both players have thrown punches at each other and believe they can beat the other. So far, we have seen Nepo taking the lead and Ding hitting back. But we have yet to witness how Nepo would react had Ding taken the lead. }
1. e4 { [%eval 0.36] } { It's not a surprise anymore that Nepo feels comfortable with 1.e4, and his team can sense that Ding does not feel so confident with his openings against Nepo's 1.e4 } 1... e6 { [%eval 0.0] } { After a brief pause, Ding goes for it! It's the French defence!! My pet opening until I became a grandmaster, and occasionally I used it as a surprise weapon.
Never could I have imagined that I would be witnessing the
French defence in a World Championship match! } 2. d4 { [%eval 0.3] } 2... d5 { [%eval 0.25] } 3. Nd2 { [%eval 0.17] } { This move poses the least problems to Black compared to 3.e5 or 3.Nc3. At the same time, this is a good choice when your opponent surprises you with the French defence, and you are unable to remember all the complex variations in 3.e5 and 3.Nc3 } (3. e5!?)  (3. Nc3!?) 3... c5 { [%eval 0.0] } (3... dxe4 { Not an easy move to crack and mostly employed by players who want to keep it simple as they can play 3. Nc3- de4. So it reduces studying a lot of theory. })  (3... Nf6 4. e5 Nfd7 { It leads to a complex position, but with good preparation, white will have an easy game. }) 4. Ngf3 { [%eval 0.0] } (4. exd5!? { is another move which has been played at the top numerous times. }) 4... cxd4 { [%eval 0.21] } (4... Nc6!? { I had a couple of battles in this direction against Mamedov Rauf. Readers can check this direction with the help of my games. } 5. exd5 exd5 6. Bb5 Qe7+ $13) 5. Nxd4 { [%eval -0.13] } 5... Nf6 { [%eval 0.12] } 6. exd5 { [%eval -0.09] } 6... Nxd5 { [%eval 0.19] } (6... Qxd5!? { Used to be a main variation. The top players no longer play it. }) 7. N2f3 { [%eval -0.29] } 7... Be7 { [%eval 0.24] } (7... Bb4+!? { When I was playing French, this was my choice. We can see that Nepo has significant experience here with a couple of games he played in 2022. This could explain why Ding chose 7...Be7 }) 8. Bc4 { [%eval 0.19] } 8... Nc6 { [%eval 0.13] } { That is a very interesting choice by Ding. He offers to trade the knight at the cost of spoiling his pawn structure. } 9. Nxc6 { [%eval 0.05] } 9... bxc6 { [%eval 0.09] } 10. O-O { [%eval 0.03] } 10... O-O { [%eval 0.05] } 11. Qe2 { [%eval 0.0] } { After several logical moves by both sides, We have reached an interesting position.
Structurally White appears to be doing well. White has nice control of the e5 square, and his pawn structure is better than Black's due to fewer pawn islands. So why did Ding choose to enter here? Black will bring his c8 bishop into play by playing Bb7 and c5. Black's light square bishop might appear innocent, but combined with other pieces, it is one of the monsters in the French defence. } 11... Bb7 { [%eval 0.15] } 12. Bd3 { [%eval 0.06] } 12... Qc7 { [%eval 0.06] } { While Ding found natural and healthy moves, His time management was quite poor with spending a lot of time on moves 11... Bb7 and 12... Qc7 } 13. Qe4 { [%eval 0.0] } 13... Nf6 { [%eval 0.22] } (13... g6!? { Also a quite interesting way to stop the checkmate on h7. Both are equally interesting. }) 14. Qh4 { [%eval 0.19] } (14. Bf4 { Calmer approach and certainly not inferior to 14. Qh4. This might be something which Magnus [Carlsen] would consider it, but Nepo would never go for this idea. } 14... Nxe4 15. Bxc7 c5 $13 { Position remains equal as Black solved all the problems. }) 14... c5 { [%eval 0.27] } { Opening the diagonal for the light square bishop. } 15. Bf4 { [%eval 0.3] } { White is asking questions about where the queen would be moved. } (15. Bg5 { Leads nowhere as White is not yet ready to sacrifice on h6. Let's take a look at what will be Black's response. } 15... h6 16. Bxh6 gxh6 17. Qxh6 { This position would be winning if it is White to move. But then, that one move makes a lot of difference in chess. } 17... c4 18. Qg5+ Kh8 19. Qh6+ { White has nothing better than to go for perpetual checks and save half a point. }) 15... Qb6 { [%eval 0.42] } (15... Qd8 { This is the engine's top choice, and I think it is unlikely any human will play it fearing the Queen will come under attack after a simple move like 16. Rad1. Below I give how the engine wants to continue. } 16. Rad1 Bxf3 17. gxf3 c4 18. Bxh7+ { It feels like White is winning Black's Queen, but White is losing here! } 18... Nxh7 $19 { White's Queen comes under attack due to the Bishop on e7, and it cannot be captured as Black's Queen is protecting. White remains a piece down. }) 16. Ne5 { [%eval 0.29] } { Not only did White centralise the Knight, but he also created a deadly threat of Nd7 } 16... Rad8 { [%eval 0.16] } { Ding plays more or less forced after 16 minutes thought. Overall, he spent a lot of time on the moves he normally would play at once. } (16... a6 { I made a random move to illustrate the threat of Nd7. } 17. Nd7 Nxd7 (17... Qc6 18. Nxf6+ Bxf6 19. Qxh7#) 18. Qxh7#) 17. Rae1 { [%eval -0.04] } (17. Rfe1 Rd4 18. Ng4 Rfd8 19. Nxf6+ Bxf6 20. Qxh7+ Kf8 21. Bg3 c4 $13 { White is up a pawn, but if you see the pieces of Black, you will agree that Black has full control of the position with both Bishops controlling many squares. })  (17. Bg5 Rd4 18. Qh3 g6 $13 { It seems like White could exploit the weak dark squares but Black's pieces are nicely taking control of the centre and ready to launch an attack on White's King. }) 17... g6 { [%eval 0.33] } 18. Bg5 { [%eval -0.2] } { White is threatening to capture on f6. Therefore: } 18... Rd4 { [%eval -0.11] } { is the only move and a good one. Attacking the queen on h4. } 19. Qh3 { [%eval -0.13] } 19... Qc7 { [%eval 0.01] } { Another nice move. Black can exchange the dark square Bishop anytime. Black threatens c4 here. } (19... Nd5!? 20. Bxe7 Nxe7 21. c3 Rd5 22. Ng4 $13 { Black is not losing here after Rdd8, but it feels much easier to play from the White side here. }) 20. b3 { [%eval -0.22] } (20. c3 Rd5 21. f4 c4!! { Engine finds this in a second! The concept is beautiful. Once we see the move, We can figure out the point behind it. Black is disturbing the Bishop, which is preventing the Black Rook from entering the 2nd rank. It also opens the a7-g1 diagonal, which either Bishop or Queen can use. } (21... Nh5 22. Bh6 Ng7 $13 { With unclear game. }) 22. Nxc4 (22. Bxc4 Rd2 $19) 22... Rfd8 23. Ne5 Nh5 $13) 20... Nh5!? { [%eval -0.09] } (20... Nd5!? { Interesting alternative for Black. }) 21. f4!? { [%eval -0.37] } (21. Bh6 Nf4 22. Bxf4 Rxf4 23. Qg3 g5 24. Qh3 Rh4 25. Qg3 Rf4) 21... Bd6!? { [%eval 0.0] } { This is a classy move showing excellent understanding of the position. } 22. c3 { [%eval 0.23] } 22... Nxf4 { [%eval 0.3] } 23. Bxf4 { [%eval -0.17] } 23... Rxf4 { [%eval -0.11] } 24. Rxf4 { [%eval -0.22] } 24... Bxe5 { [%eval -0.13] } { Ding saw the following forced variation before playing 21... Bd6. He rightly assessed that Black has an excellent compensation for the sacrificed exchange. } 25. Rh4 { [%eval -0.11] } 25... Rd8 { [%eval -0.16] } 26. Be4 { [%eval -0.18] } { A pair of Bishops are always dangerous, and Nepo rightly offers to trade light square Bishops. } (26. Rxh7?? Rxd3 $19) 26... Bxe4 { [%eval 0.2] } (26... Ba6 { The engine screams that this is slightly more accurate. From a practical point of view, I like Ding's choice of exchanging the light square Bishops. } 27. Rxh7 Bg7 28. Rxg7+ Kxg7 29. Qe3) 27. Rhxe4 { [%eval 0.18] } { Attacking the Bishop on e5 } (27. Rexe4?? Rd1+ 28. Kf2 Qd8 $19 { With all of Black's pieces joining the party, loss of material is inevitable. }) 27... Rd5 { [%eval 0.15] } 28. Rh4 { [%eval -0.37] } { Nepo wants to activate his Queen, but the pawn on h2 is under attack and will lose if he moves the Queen.
Therefore Nepo brought his Rook to h4 to defend the h2 pawn, and allow moving the Queen from h3. } 28... Qd6 { [%eval -0.37] } { Rd3 is a serious threat as White will lose the c3 pawn. } 29. Qe3 { [%eval -0.44] } (29. Rxh7?? Rd1 $19) 29... h5 { [%eval -0.41] } 30. g3 { [%eval -0.56] } { Now that the Queen has reached a better square than h3, It is time to bring the Rook on h4 into action. To do that, the White has to protect the h2 pawn. } 30... Bf6 { [%eval -0.42] } 31. Rc4 { [%eval -0.52] } 31... h4 { [%eval -0.45] } { Played after 3 and a half minutes of thought.
Frankly, from here, Ding's time management and what went through his head were hard to explain. It is as if he just froze. Since there are nine moves to make to pass the 40 move time control, He could have chosen to move his King around a bit. } (31... Kg7!?) 32. gxh4 { [%eval -0.64] } 32... Rd2?! { [%eval 0.17] } { Inaccuracy. Be5 was best. } (32... Be5 33. Qf2 (33. Qe2 Kg7 34. Kh1 Bf4 35. Rf1 e5 36. Qg4 f5 37. Qf3 Rd3 38. Qb7+ Kh6 39. Qa8) 33... Rd2 $13 { Position remains unclear. Here the moves for Black aren't that hard to make as the Bishop is joining the attack. }) 33. Re2 { [%eval 0.0] } 33... Rd3?? { [%eval 1.91] } { Blunder. Rd5 was best. } { The main reason for this blunder is poor time management in this game. Ding was spending time at every move. Nepo maintained a nice balance as to when to think and when to make moves. } (33... Rd5 34. Rf2 Be5 35. Kg2 Bxh2 36. Rg4 Re5 37. Qd2 Rd5) 34. Qxc5 { [%eval 1.95] } 34... Rd1+?! { [%eval 3.09] } { Inaccuracy. Qxc5+ was best. } (34... Bd4+ { Of course, there is no time to calculate such complicated stuff. In any case, it doesn't work for Black. } 35. cxd4 Rd1+ 36. Kg2 Qf4 37. Qe5! { White's queen is closer to the King, and Black will have a few checks but no more. The
following variation is interesting. It is pretty much forced and not for White to find it. } 37... Qf1+ 38. Kg3 Rd3+ 39. Re3 Qg1+ 40. Kf3 Qf1+ 41. Kg4 Qg1+ 42. Rg3 Qd1+ 43. Kg5)  (34... Qxc5+ 35. Rxc5 Bxc3 36. Rc7 Bd4+ 37. Kg2 e5 38. Rec2 Rd1 39. Rd7 Rg1+ 40. Kh3 Re1 41. Rg2) 35. Kg2 { [%eval 3.05] } 35... Qd3 { [%eval 1.94] } 36. Rf2 { [%eval 2.88] } 36... Kg7? { [%eval 4.63] } { Mistake. Qb1 was best. } (36... Qb1 37. Qe3) 37. Rcf4 { [%eval 4.53] } 37... Qxc3 { [%eval 4.47] } { Ding played this move and resigned. He still needs to make three more moves to make it to 40 moves (and get an extra hour on his clock). His main problem is that the position is completely lost here.
While I'm not a specialist in chess history, I can't recall a similar incident at a game of this level.
From today's game, We can learn that it is crucial to manage our time correctly. When the moves are forced, you make them, and then you can think. } 1-0


  """

  val all = List(pgn, pgn2, wcc2023Game7)
