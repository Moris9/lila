@(doc: io.prismic.Document, resolver: io.prismic.DocumentLinkResolver, donations: List[lila.donation.Donation], top: List[lila.donation.Donation], progress: lila.donation.Progress)(implicit ctx: Context)

@payPalVars = {
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="custom" value="@ctx.userId">
}

@goodies = {
<h2>@progress.month Progress</h2>
<div class="progress">
  <div class="progressbar @if(progress.complete) {green} flashy">
    <div style="width: @progress.percent%"></div>
  </div>
  <div class="text">
    <span class="current">$@(progress.current / 100)</span>
    @progress.percent%
    <span class="goal">$@(progress.goal / 100)</span>
  </div>
</div>
<h2>Top Donators</h2>
<table class="donators">
  <tbody>
    @top.map { donation =>
    <tr>
      <td>@userIdLink(donation.userId)</td>
      <td>@momentFromNow(donation.date)</td>
    </tr>
    }
  </tbody>
</table>
<h2>Recent Donators</h2>
<table class="donators">
  <tbody>
    @donations.take(10).map { donation =>
    <tr>
      <td>@userIdLink(donation.userId)</td>
      <td>@momentFromNow(donation.date)</td>
    </tr>
    }
  </tbody>
</table>
}

@moreCss = {
@cssTag("page.css")
@cssTag("donation.css")
}

@site.layout(
moreCss = moreCss,
goodies = goodies.some,
title = s"${~doc.getText("doc.title")}") {

<div class="content_box small_box doc_box donate_box">

  <h1 class="lichess_title">@doc.getText("doc.title")</h1>

  <div class="body">
    @Html(~doc.getHtml("doc.content", resolver))

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
      <! -- $2 -->
      @payPalVars
      <input type="hidden" name="hosted_button_id" value="7R3N7MNXDM7A6">
      <strong>$2</strong> = <strong>6 hours</strong> of lichess server:
      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <!-- <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"> -->
    </form>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
      <! -- $5 -->
      @payPalVars
      <input type="hidden" name="hosted_button_id" value="JBSUYNPRCMT9U">
      <strong>$5</strong> = <strong>18 hours</strong> of lichess server:
      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <!-- <img alt="" border="0" src="https://www.paypalobjects.com/fr_FR/i/scr/pixel.gif" width="1" height="1"> -->
    </form>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
      <! -- $10 -->
      @payPalVars
      <input type="hidden" name="hosted_button_id" value="ZZ96PGW3UNRPQ">
      <strong>$10</strong> = <strong>1 day and 15 hours</strong> of lichess server:
      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <!-- <img alt="" border="0" src="https://www.paypalobjects.com/fr_FR/i/scr/pixel.gif" width="1" height="1"> -->
    </form>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
      <! -- $20 -->
      @payPalVars
      <input type="hidden" name="hosted_button_id" value="VTKN4LNQZ2FNL">
      <strong>$20</strong> = <strong>3 days and 8 hours</strong> of lichess server:
      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <!-- <img alt="" border="0" src="https://www.paypalobjects.com/fr_FR/i/scr/pixel.gif" width="1" height="1"> -->
    </form>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
      <! -- any -->
      @payPalVars
      <input type="hidden" name="hosted_button_id" value="EDV5QHA9HYGJS">
      Or specify any other amount:
      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <!-- <img alt="" border="0" src="https://www.paypalobjects.com/fr_FR/i/scr/pixel.gif" width="1" height="1"> -->
    </form>
    <h2>Thank you to all lichess.org donators!</h2>
    <table class="slist donators">
      <tbody>
        @donations.map { donation =>
        <tr>
          <td>@showDate(donation.date)</td>
          <td>@userIdLink(donation.userId)</td>
          <td>@donation.nonEmptyMessage.map { message =>
            <em>“@message”</em>
            }</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
}
