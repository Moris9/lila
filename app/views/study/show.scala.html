@(s: lila.study.Study, data: lila.study.JsonView.BiData)(implicit ctx: Context)

@title = @{ s"${usernameOrAnon(s.owner.some)} Study" }

@moreJs = {
@jsAt(s"compiled/lichess.analyse${isProd??(".min")}.js")
@embedJs {
lichess = lichess || {};
lichess.study = {
study: @Html(play.api.libs.json.Json.stringify(data.study)),
analysis: @Html(play.api.libs.json.Json.stringify(data.analysis)),
i18n: @board.userAnalysisI18n(),
userId: @Html(ctx.userId.fold("null")(id => s""""$id"""")),
explorer: {
endpoint: "@explorerEndpoint"
}
};
}
}

@underchat = {
@views.html.game.watchers()
}

@study.layout(
title = title,
side = Html(""),
chat = base.chatDom(trans.spectatorRoom.str(), ctx.isAuth),
underchat = underchat,
moreJs = moreJs) {
<div class="analyse cg-512">@miniBoardContent</div>
}
