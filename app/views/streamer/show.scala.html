@(s: lila.streamer.Streamer.WithUserAndStream)(implicit ctx: Context)

@side = {
<div class="side streamer-side">
  <div class="profile">
    <a class="blue" href="@routes.User.show(s.user.username)">View @s.user.username lichess profile</a>
    @if(ctx.is(s.user) || isGranted(_.Streamers)) {
    <br /><br /><a class="blue" href="@routes.Streamer.edit()@if(!ctx.is(s.user)){?u=@s.user.id}">Edit streamer page</a>
    }
  </div>
  @if(s.streamer.approval.chatEnabled) {
  @s.stream.map {
  case lila.streamer.Stream.Twitch.Stream(userId, _, _) => {
  <iframe
    frameborder="0"
    scrolling="no"
    src="https://twitch.tv/@userId/chat?popout="
    height="418"></iframe>
  }
  case lila.streamer.Stream.YouTube.Stream(_, _, videoId, _) => {
  <iframe
    frameborder="0"
    scrolling="no"
    src="https://www.youtube.com/live_chat?v=@videoId&embed_domain=@netDomain"
    height="418"></iframe>
  }
  }
  }
</div>
}

@base.layout(title = s"${s.user.titleUsername} streams on lichess.org",
side = side.some,
moreCss = cssTag("streamer.show.css")) {
<div class="content_box no_padding streamer">
  @s.stream.map {
  case lila.streamer.Stream.Twitch.Stream(userId, _, _) => {
  <div class="live twitch">
    <iframe
      src="https://player.twitch.tv/?channel=@userId"
      width="792"
      height="446"
      allowfullscreen autoplay></iframe>
  </div>
  }
  case lila.streamer.Stream.YouTube.Stream(_, _, videoId, _) => {
  <div class="live youTube">
    <iframe
      width="792"
      height="446"
      src="https://www.youtube.com/embed/@videoId?autoplay=1"
      frameborder="0" allowfullscreen></iframe>
  </div>
  }
  }
  <div class="top">
    @pic(s.streamer, s.user, 250)
    <div class="overview">
      <h1>@s.streamer.name</h1>
      @s.streamer.headline.map(_.value).map { d =>
      <p class="headline @if(d.size < 60){small} else {@if(d.size < 120){medium}else{large}}">@d</p>
      }
      <div class="services">
        @s.streamer.twitch.map { twitch =>
        <a class="service twitch" href="@twitch.fullUrl">
          @StreamerSvg.twitch
          @twitch.minUrl
        </a>
        }
        @s.streamer.youTube.map { youTube =>
        <a class="service youTube" href="@youTube.fullUrl">
          @StreamerSvg.youTube
          @youTube.minUrl
        </a>
        }
      </div>
      <p class="at">@trans.lastSeenActive(momentFromNow(s.streamer.seenAt))</p>
      @s.streamer.liveAt.map { liveAt =>
      <p class="at">Last stream @momentFromNow(liveAt)</p>
      }
    </div>
  </div>
  @if(s.stream.isEmpty) {
  <div class="offline">OFFLINE</div>
  }
  <div class="description">@richText(s.streamer.description.fold("")(_.value))</div>
</div>
}
