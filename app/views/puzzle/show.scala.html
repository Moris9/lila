@(puzzle: lila.puzzle.Puzzle)(implicit ctx: Context)

@moreCss = {
@cssTag("chessboardjs.css")
}

@moreJs = {
@jsTag("vendor/chess.min.js")
@jsTagCompiled("chessboard.js")
@jsAt("compiled/puzzle.js")
}

@layout("Puzzle " + puzzle.id,
goodies = infoBox(puzzle).some,
evenMoreCss = moreCss.some,
evenMoreJs = moreJs.some) {

<div id="puzzle">

  <div id="chessboard"
    data-post-url="@routes.Puzzle.attempt(puzzle.id)"
    data-fen="@puzzle.fen"
    data-color="@puzzle.color"
    data-move="@puzzle.initialMove"
    data-lines="@lila.puzzle.Line.toJsonString(puzzle.lines)"></div>

  @puzzle.gameId.map { id =>
  <p><a href="@routes.Round.watcher(id, puzzle.color.name)">From game #@id</a></p>
  }

  <div class="message on_win">
    Congratulations! You solved the puzzle.
  </div>
  <div class="message on_retry">
    This was a good move, but you can do better!
  </div>
  <div class="message on_fail">
    Puzzle failed! But you can keep looking for the solution.
  </div>

<pre>
@lila.puzzle.Line.toString(puzzle.lines)
</pre>
</div>
}
