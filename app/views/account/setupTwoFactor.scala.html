@(u: User, form: Form[_])(implicit ctx: Context)

@title = @{ s"${u.username} - Two-factor authentication" }

@moreJs = {
@jsAt("javascripts/vendor/qrcode.min.js")
@jsTag("twofactor.form.js")
}

@account.layout(title = title, active = "twofactor", evenMoreCss = cssTag("material.form.css"), evenMoreJs = moreJs) {
<div class="content_box small_box high twofactor">
  <h1 class="lichess_title">Setup two-factor authentication</h1>
  <p>Two-factor authentication adds another layer of security to your account.</p>
  <form class="material form" action="@routes.Account.setupTwoFactor" method="POST">
    <ol>
      <li>
        <p class="explanation">Get an app for two-factor authentication, for example Google Authenticator for <a class="blue" href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2">Android</a> or <a class="blue" href="https://itunes.apple.com/de/app/google-authenticator/id388497605">iOS.</a></p>
      </li>
      <li>
        <p class="explanation">Scan the QR code with the app.</p>
        <div style="width: 276px; height: 275px; padding: 10px; background: white; margin: 2em auto;">
          <div id="qrcode" style="width: 256px; height: 256px;"></div>
        </div>
      </li>
      <li>
        <p class="explanation">Enter your password and the authentication code generated by the app to complete the setup. You will need an authentication code every time you log in.</p>
        @base.form.hidden(form("secret"))
        @passwdFormField(form("passwd"), trans.password())
        @base.form.group(form("token"), Html("Authentication code")) { field =>
        @base.form.input(field, typ = "text", pattern = "[0-9]{6}".some, required = true, autocomplete = false)
        @errMsg(form("token"))
        }
        @errMsgMaterial(form.errors)
        <div class="button-container">
          <button type="submit" class="submit button text">Enable two-factor authentication</button>
        </div>
      </li>
    </ol>
  </form>
</div>
}
