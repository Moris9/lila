@(sim: lila.simul.Simul, socketVersion: Int, data: play.api.libs.json.JsObject, chat: Option[lila.chat.UserChat.Mine])(implicit ctx: Context)

@underchat = {
<div class="watchers none" data-icon="v">
  <span class="list inline_userlist"></span>
</div>
}

@moreJs = {
@jsAt(s"compiled/lichess.simul${isProd??(".min")}.js")
@embedJs {
lichess.simul = {
data: @Html(J.stringify(data)),
i18n: @jsI18n(),
socketVersion: @socketVersion,
userId: @jsUserId
};
@chat.map { c =>
lichess.makeChat('chat', {
lines: @Html(J.stringify(lila.chat.JsonView(c.chat))),
i18n: @base.chatJsI18n(),
userId: @Html(ctx.userId.fold("null")(id => s""""$id"""")),
kobold: @ctx.troll,
mod: @isGranted(_.MarkTroll),
timeout: @c.timeout,
timeoutReasons: @Html(J.stringify(lila.chat.JsonView.timeoutReasons))
});
}
}
}

@chatDom = {
@if(chat.isDefined) {
<div id="chat" class="side_box"></div>
}
}

@simul.layout(
title = sim.fullName,
side = simul.side(sim).some,
underchat = underchat.some,
chat = chatDom.some,
moreJs = moreJs,
chessground = false) {
<div id="simul"></div>
}
