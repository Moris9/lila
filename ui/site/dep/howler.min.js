!function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=6,e._codecs={},e._howls=[],e._volume=1,e._canPlayEvent="canplaythrough",e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx?e.ctx.state||"suspended":"suspended",e._autoSuspend(),!e.usingWebAudio)try{var o=new Audio;void 0===o.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(n){e.noAudio=!0}try{var o=new Audio;o.muted?e.noAudio=!0:e._codecs={mp3:!(!o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&!o.canPlayType("audio/mp3;").replace(/^no$/,"")),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")}}catch(e){}return e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,e._releaseHtml5Audio(n)}catch(n){e.noAudio=!0;break}for(var t=0;t<e._howls.length;t++)if(!e._howls[t]._webAudio)for(var r=e._howls[t]._getSoundIds(),u=0;u<r.length;u++){var i=e._howls[t]._soundById(r[u]);i&&i._node&&!i._node._unlocked&&(i._node._unlocked=!0,i._node.load())}e._autoResume();var d=e.ctx.createBufferSource();d.buffer=e._scratchBuffer,d.connect(e.ctx.destination),void 0===d.start?d.noteOn(0):d.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),d.onended=function(){d.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),e}},_obtainHtml5Audio:function(){var e=this||n;return e._html5AudioPool.length?e._html5AudioPool.pop():((new Audio).play().catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio)},_releaseHtml5Audio:function(e){var o=this||n;return e._unlocked&&o._html5AudioPool.push(e),o},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var o=0;o<e._howls.length;o++)if(e._howls[o]._webAudio)for(var t=0;t<e._howls[o]._sounds.length;t++)if(!e._howls[o]._sounds[t]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var n=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(n,n)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new e;(function(e){this.init(e)}).prototype={init:function(e){var o=this;return n.ctx||d(),o._pool=e.pool||5,o._preload=!0,o._src="string"!=typeof e.src?e.src:[e.src],o._volume=void 0!==e.volume?e.volume:1,o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=[],o._onload=[],o._onloaderror=[],o._onplayerror=[],o._onpause=[],o._onplay=[],o._onstop=[],o._onvolume=[],o._onunlock=[],o._onresume=[],o._webAudio=n.usingWebAudio&&!o._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(o),o._preload&&"none"!==o._preload&&o.load(),o},load:function(){var e=this,t=null;if(n.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var u=0;u<e._src.length;u++){var i,d;if("string"==typeof(d=e._src[u])){if(i=/^data:audio\/([^;,]+);/i.exec(d),i||(i=/\.([^.]+)$/.exec(d.split("?",1)[0])),i&&(i=i[1].toLowerCase()),i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&n.codecs(i)){t=e._src[u];break}}else e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.")}return t?(e._src=t,e._state="loading",new o(e),e._webAudio&&r(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,o){var t=this,r=e?t._soundById(e):t._inactiveSound();if(!r)return null;if("loaded"!==t._state){r._ended=!1;var u=r._id;return t._queue.push({event:"play",action:function(){t.play(u)}}),u}if(e&&!r._paused)return o||t._loadQueue("play"),r._id;t._webAudio&&n._autoResume(),r._ended=!1;var i=function(){r._paused=!1},d=r._node;if(t._webAudio){var a=function(){t._playLock=!1,i(),t._refreshBuffer(r);var e=r._volume;d.gain.setValueAtTime(e,n.ctx.currentTime),r._playStart=n.ctx.currentTime,void 0===d.bufferSource.start?d.bufferSource.noteGrainOn(0,0,duration):d.bufferSource.start(0,0,duration),t._endTimers[r._id]=setTimeout(t._ended.bind(t,r),t._duration),o||setTimeout(function(){t._emit("play",r._id),t._loadQueue()},0)};"running"===n.state&&"interrupted"!==n.ctx.state?a():(t._playLock=!0,t.once("resume",a),t._clearTimer(r._id))}else{var s=function(){d.currentTime=0,d.volume=r._volume*n.volume();try{var e=d.play();if(e&&e.then?(t._playLock=!0,i(),e.then(function(){t._playLock=!1,d._unlocked=!0,o||(t._emit("play",r._id),t._loadQueue())}).catch(function(){t._playLock=!1,t._emit("playerror",r._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),r._ended=!0,r._paused=!0})):o||(t._playLock=!1,i(),t._emit("play",r._id),t._loadQueue()),d.paused)return void t._emit("playerror",r._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");t._endTimers[r._id]=function(){t._ended(r),d.removeEventListener("ended",t._endTimers[r._id],!1)},d.addEventListener("ended",t._endTimers[r._id],!1)}catch(e){t._emit("playerror",r._id,e)}};if(d.readyState>=3)s();else{t._playLock=!0;var _=function(){s(),d.removeEventListener(n._canPlayEvent,_,!1)};d.addEventListener(n._canPlayEvent,_,!1),t._clearTimer(r._id)}}return r._id},volume:function(){var e,o,t=this,r=arguments;if(0===r.length)return t._volume;1===r.length||2===r.length&&void 0===r[1]?t._getSoundIds().indexOf(r[0])>=0?o=parseInt(r[0],10):e=parseFloat(r[0]):r.length>=2&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var u;if(!(void 0!==e&&e>=0&&e<=1))return u=o?t._soundById(o):t._sounds[0],u?u._volume:0;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,r)}}),t;void 0===o&&(t._volume=e),o=t._getSoundIds(o);for(var i=0;i<o.length;i++)(u=t._soundById(o[i]))&&(u._volume=e,t._webAudio&&u._node?u._node.gain.setValueAtTime(e,n.ctx.currentTime):u._node&&(u._node.volume=e*n.volume()),t._emit("volume",u._id));return t},state:function(){return this._state},unload:function(){for(var e=this,o=e._sounds,r=0;r<o.length;r++)o[r]._paused||e.stop(o[r]._id),e._webAudio||(o[r]._node.removeEventListener("error",o[r]._errorFn,!1),o[r]._node.removeEventListener(n._canPlayEvent,o[r]._loadFn,!1),n._releaseHtml5Audio(o[r]._node)),delete o[r]._node,e._clearTimer(o[r]._id);var u=n._howls.indexOf(e);u>=0&&n._howls.splice(u,1);var i=!0;for(r=0;r<n._howls.length;r++)if(n._howls[r]._src===e._src||e._src.indexOf(n._howls[r]._src)>=0){i=!1;break}return t&&i&&delete t[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,o,t){var r=this,u=r["_on"+e];return"function"==typeof n&&u.push(t?{id:o,fn:n,once:t}:{id:o,fn:n}),r},off:function(e,n,o){var t=this,r=t["_on"+e],u=0;if("number"==typeof n&&(o=n,n=null),n||o)for(u=0;u<r.length;u++){var i=o===r[u].id;if(n===r[u].fn&&i||!n&&i){r.splice(u,1);break}}else if(e)t["_on"+e]=[];else{var d=Object.keys(t);for(u=0;u<d.length;u++)0===d[u].indexOf("_on")&&Array.isArray(t[d[u]])&&(t[d[u]]=[])}return t},once:function(e,n,o){var t=this;return t.on(e,n,o,1),t},_emit:function(e,n,o){for(var t=this,r=t["_on"+e],u=r.length-1;u>=0;u--)r[u].id&&r[u].id!==n&&"load"!==e||(setTimeout(function(e){e.call(this,n,o)}.bind(t,r[u].fn),0),r[u].once&&t.off(e,r[u].fn,r[u].id));return t._loadQueue(e),t},_loadQueue:function(e){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===e&&(n._queue.shift(),n._loadQueue()),e||o.action()}return n},_ended:function(e){var o=this;return o._emit("end",e._id),o._webAudio?(e._paused=!0,e._ended=!0,o._clearTimer(e._id),o._cleanBuffer(e._node),n._autoSuspend()):o.stop(e._id,!0),o},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if("function"!=typeof n._endTimers[e])clearTimeout(n._endTimers[e]);else{var o=n._soundById(e);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,o=0;o<n._sounds.length;o++)if(e===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new o(e)},_drain:function(){var e=this,n=e._pool,o=0,t=0;if(!(e._sounds.length<n)){for(t=0;t<e._sounds.length;t++)e._sounds[t]._ended&&o++;for(t=e._sounds.length-1;t>=0;t--){if(o<=n)return;e._sounds[t]._ended&&(e._webAudio&&e._sounds[t]._node&&e._sounds[t]._node.disconnect(0),e._sounds.splice(t,1),o--)}}},_getSoundIds:function(e){var n=this;if(void 0===e){for(var o=[],t=0;t<n._sounds.length;t++)o.push(n._sounds[t]._id);return o}return[e]},_refreshBuffer:function(e){var o=this;return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=t[o._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),o},_cleanBuffer:function(e){var o=this;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),navigator.vendor.indexOf("Apple")))try{e.bufferSource.buffer=n._scratchBuffer}catch(e){}return e.bufferSource=null,o}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,o=e._parent;return e._volume=o._volume,e._paused=!0,e._ended=!0,e._id=++n._counter,o._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,t=e._volume;return o._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(t,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._node.src=o._src,e._node.preload=!0===o._preload?"auto":o._preload,e._node.volume=t*n.volume(),e._node.load()),e},reset:function(){var e=this,o=e._parent;return e._volume=o._volume,e._paused=!0,e._ended=!0,e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,o=e._parent;o._duration=Math.ceil(10*e._node.duration)/10,"loaded"!==o._state&&(o._state="loaded",o._emit("load"),o._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)}};var t={},r=function(e){var n=e._src;if(t[n])return e._duration=t[n].duration,void i(e);if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),r=new Uint8Array(o.length),d=0;d<o.length;++d)r[d]=o.charCodeAt(d);u(r.buffer,e)}else{var a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onload=function(){var n=(a.status+"")[0];if("0"!==n&&"2"!==n&&"3"!==n)return void e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".");u(a.response,e)},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete t[n],e.load())};try{a.send()}catch(e){a.onerror()}}},u=function(e,o){var r=function(){o._emit("loaderror",null,"Decoding audio data failed.")},u=function(e){e&&o._sounds.length>0?(t[o._src]=e,i(o,e)):r()};1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(u).catch(r):n.ctx.decodeAudioData(e,u,r)},i=function(e,n){n&&!e._duration&&(e._duration=n.duration),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},d=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(e){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(navigator),o=e&&navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)?parseInt(appVersion[1],10):null;if(o&&o<9){/safari/.test(navigator.userAgent.toLowerCase())||(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}}}();